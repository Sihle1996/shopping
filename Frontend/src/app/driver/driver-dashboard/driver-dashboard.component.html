<div class="p-4 space-y-4 pb-24">
  <h2 class="text-xl font-bold">Assigned Orders</h2>

  <button
    class="bg-blue-500 text-white px-4 py-2 rounded"
    (click)="toggleAvailability()">
    Toggle Availability ({{ availability }})
  </button>

  <div *ngFor="let order of orders" class="border rounded p-3 shadow space-y-4">
    <div><strong>ID:</strong> {{ order.id }}</div>
    <div><strong>Status:</strong> {{ order.status }}</div>
    <div><strong>Delivery Address:</strong> {{ order.deliveryAddress }}</div>

    <!-- Map with unique ID to prevent Leaflet conflicts -->
    <div class="h-64 w-full">
      <app-driver-map
        [deliveryAddress]="order.deliveryAddress"
        [mapId]="'map-' + order.id">
      </app-driver-map>
    </div>

    <button
      *ngIf="order.status && order.status.trim().toLowerCase() !== 'delivered'"
      class="mt-2 bg-green-500 text-white px-3 py-1 rounded border border-green-700"
      (click)="markDelivered(order.id)">
      Mark as Delivered
    </button>
  </div>
</div>
